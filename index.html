<html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>
  <!-- <script src="sketch.js"></script> -->
  <script src="Ball.js"></script>

  <script>
    let playing = true;
    let video;
    let red, blue, purple, green;

    function setupVideo() {
      video = createCapture(VIDEO);
      video.size(640, 480);
      video.hide();
    }
    
    function togglePlay() {
      if (playing)
        video.remove();
      else 
        setupVideo();
        
      playing = !playing;
    }


    function setup() {
      createCanvas(640, 480);

      setupVideo();
      red = new Ball(color(172, 39, 48), 15);
      blue = new Ball(color(30, 110, 208), 35);
      purple = new Ball(color(49, 31, 107), 30);
      green = new Ball(color(5, 122, 70), 45);
    }

    
    function draw() {
      background(0);

      if (!playing){
        return;
      }
      
      video.loadPixels();
      image(video, 0, 0, width, height);

      red.findColor();
      red.showTrail(color(200, 50, 50), "Dots", false);

      blue.findColor();
      blue.showTrail(color(70, 70, 250), "Dots", false);

      purple.findColor();
      purple.showTrail(color(100, 10, 100), "Dots", false);

      green.findColor();
      green.showTrail(color(0, 250, 0), "Dots", false);
    }

  </script>
</head>

<body>
  <input type="checkbox" id="on"></input>
  <button id="playToggle" onclick="togglePlay()">Pause</button>
  <table>
    <tr>
      <td>
        <main></main>
      </td>
      <td>
        <div id="settings">
          <div>
            <input type="radio" id="dots" name="drone" value="dots">
            <label for="dots">dots]</label>
          </div>
          
          <div>
            <input type="radio" id="dewey" name="drone" value="dewey">
            <label for="dewey">Dewey</label>
          </div>
        </div>
      </td>
    </tr>

  </table>
</body>

</html>