<html>

<head>

  <style>
    #settings-box {
      text-align: center;
      padding: 15px;
      border: 1px solid black;
      background-color: rgba(172, 39, 48, 0.3);
    }

  </style>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>
  <!-- <script src="sketch.js"></script> -->
  <script src="Ball.js"></script>

  <script>
    let playing = true;
    let video;
    let red, blue, purple, green;
    let colors = [];

    function setupVideo() {
      video = createCapture(VIDEO);
      // video.size(640, 480);
      video.size(displayWidth, displayHeight)
      video.hide();
    }
    
    function togglePlay() {
      // fullscreen(true);
      if (playing)
        video.remove();
      else 
        setupVideo();
        
      playing = !playing;
    }


    function setup() {
      console.log('setup')
      // createCanvas(640, 480);
      createCanvas(displayWidth, displayHeight)

      setupVideo();
      // colors = [
      //   new Ball(color(172, 39, 48), 15, color(200, 50, 50)), // red
      //   new Ball(color(30, 110, 208), 35, color(70, 70, 250)), // blue
      //   new Ball(color(49, 31, 107), 30, color(100, 10, 100)), // purple
      //   new Ball(color(5, 122, 70), 45, color(0, 250, 0)), // green

      // ]
      red = new Ball(color(172, 39, 48), 35);
//       blue = new Ball(color(30, 110, 208), 60);
      purple = new Ball(color(49, 31, 107), 45);
      green = new Ball(color(5, 122, 70), 60);
    }

    
    function draw() {
      background(0);

      if (!playing){
        return;
      }
      
      video.loadPixels();
      image(video, 0, 0, width, height);

      
      red.findColor();
      red.showTrail("Line", false);

//       blue.findColor();
//       blue.showTrail("Line", false);

      purple.findColor();
      purple.showTrail("Line", false);

      green.findColor();
      green.showTrail("Line", false);
    }

    function showSettings(ball) {
      

    }

        //settings: 
      //dot, dash, line
      //sensitivity
      //disable completely 
      
  </script>
</head>

<body>
  <button id="playToggle" onclick="togglePlay()">Pause</button>
  <main></main>
  
</body>

</html>
